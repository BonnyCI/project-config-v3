- pipeline:
    name: gerrithub_check
    manager: independent
    source:
      gerrithub
    trigger:
      gerrithub:
        - event: patchset-created
        - event: comment-added
          comment: (?i)^(Patch Set [0-9]+:)?( [\w\\+-]*)*(\n\n)?\s*(recheck|reverify)
    success:
      gerrithub:
        verified: 1
    failure:
      gerrithub:
        verified: -1

- pipeline:
    name: gerrithub_gate
    manager: dependent
    success-message: Build succeeded (gate).
    source: gerrithub
    trigger:
      gerrithub:
        - event: comment-added
          approval:
            - approved: 1
    success:
      gerrithub:
        verified: 2
        submit: true
    failure:
      gerrithub:
        verified: -2
    start:
      gerrithub:
        verified: 0
    precedence: high

- job:
    name: base
    pre-run: base-pre
    post-run: base-post
    timeout: 1800

- job:
    name: bonnyci
    parent: base
    nodes:
      - name: bonnyci
        image: ubuntu-xenial

- project:
    name: BonnyCI/sandbox-v3
    gerrithub_check:
      jobs: []
    gerrithub_gate:
      jobs: []
